version: "3.9"
services:
  form-api:
    build:
      context: ./server
      dockerfile: Dockerfile
    container_name: google-form-api
    restart: unless-stopped
    environment:
      - SCHEMA_PATH=/app/schemas/schema.json
      - ALLOW_ORIGINS=*
      # Optional JSON init: if set, schema will be loaded from this file on startup
      - SCHEMA_INIT=/app/init/schema.json
    volumes:
      - ./server/data:/app/data
      - ./schemas:/app/schemas
      - ./init:/app/init
    ports:
      - "8054:8054"

  form-ui:
    build:
      context: ./ui
      dockerfile: Dockerfile
    container_name: google-form-ui
    restart: unless-stopped
    environment:
      - VITE_API_BASE=/api
    ports:
      - "8055:80"
    depends_on:
      - form-api

