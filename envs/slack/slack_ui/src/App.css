:root {
  /* Purple-themed palette */
  --bg: #2a0e42;              /* page background (darker) */
  --rail-bg: #3a1a5a;         /* workspaces column (left) - darker light purple */
  --sidenav-bg: #1a0830;      /* channels/people/dm column - darkest purple */
  --content-bg: #1f0833;      /* messages/content column - even deeper purple */
  --sidebar-border: #3e1360;
  --panel: var(--content-bg);
  --panel-border: #482368;
  --text: #f5f0ff;
  --text-dim: #cbb9e9;
  --accent: #7a22d7; /* primary purple, darker */
  --accent-2: #5f19ad;
  --chip: #2b1547;
  --chip-hover: #351b57;
}

* { box-sizing: border-box; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

.app { display: grid; grid-template-rows: 48px 1fr; height: 100vh; }
.topbar { display:flex; align-items:center; gap: 12px; padding: 0 16px; border-bottom: 1px solid var(--panel-border); background: var(--content-bg); }
.topbar-title { font-weight: 700; }
.topbar-actions { margin-left:auto; display:flex; gap: 8px; position: relative; }
.search { flex: 0 0 520px; margin-left: auto; }
.search-input { width: 100%; padding: 8px 12px; border-radius: 8px; border: 1px solid var(--panel-border); background: #15171c; color: var(--text); }

.user-avatar { width: 28px; height: 28px; border-radius: 6px; background: #2a2f36; display:flex; align-items:center; justify-content:center; font-weight: 700; color: var(--text); cursor: pointer; }
.user-menu { position: absolute; right: 0; top: 40px; width: 260px; background: #111318; border: 1px solid var(--panel-border); border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,.35); padding: 10px; z-index: 20; }
.user-menu-row { display:flex; justify-content: space-between; align-items:center; gap: 8px; }
.user-email { color: var(--text-dim); font-size: 12px; }
.user-menu .btn { width: 100%; margin-top: 8px; }

.layout { display: grid; grid-template-columns: 56px 280px 1fr; min-height: 0; }
.rail { background: var(--rail-bg); border-right: 1px solid var(--sidebar-border); padding: 8px 6px; display:flex; flex-direction: column; align-items: center; gap: 8px; }
.rail-item { width: 36px; height: 36px; border-radius: 8px; background: #2a2f36; display:flex; align-items:center; justify-content:center; color: var(--text); font-weight: 700; cursor: pointer; }
.rail-item.active { outline: 2px solid var(--accent); outline-offset: 0; }
.rail-add { width: 36px; height: 36px; border-radius: 8px; border: 1px dashed var(--panel-border); color: var(--text-dim); display:flex; align-items:center; justify-content:center; cursor: pointer; }
.sidebar { background: var(--sidebar-bg); border-right: 1px solid var(--sidebar-border); padding: 12px; overflow:auto; }
.sidenav { background: var(--sidenav-bg); border-right: 1px solid var(--sidebar-border); padding: 12px; overflow:auto; }
.menu { background: var(--panel); border-right: 1px solid var(--panel-border); padding: 12px; overflow:auto; }
.menu-list .menu-item { padding: 8px 10px; border-radius: 8px; cursor: pointer; }
.menu-list .menu-item.active, .menu-list .menu-item:hover { background: #141821; }
.nav { margin-top: 12px; }
.nav-item { padding: 6px 8px; border-radius: 8px; cursor: pointer; color: var(--text); }
.nav-item.active, .nav-item:hover { background: var(--chip-hover); }
.sidebar h3 { margin: 8px 0 12px; font-size: 14px; color: var(--text); }
.workspace-row { display:flex; align-items:center; justify-content: space-between; gap: 8px; padding: 6px 8px; border-radius: 8px; }
.workspace-name { font-weight: 700; }
.caret { opacity: .7; }
.token { font-size: 12px; color: var(--text-dim); margin: 6px 0 12px; }
.field { width: 100%; padding: 8px 10px; border: 1px solid var(--panel-border); border-radius: 8px; background: #0c0e13; color: var(--text); }
.row { display:flex; gap: 8px; }
.select { flex: 1; padding: 8px 10px; border-radius: 8px; border: 1px solid var(--panel-border); background:#0c0e13; color: var(--text); }
.btn { border: 1px solid var(--panel-border); border-radius: 8px; background: #12141a; color: var(--text); padding: 8px 10px; cursor: pointer; }
.btn:hover { background: #171a22; }
.btn-primary { background: var(--accent); border-color: var(--accent-2); }
.btn-primary:hover { filter: brightness(1.05); }

.section-title { font-size: 12px; color: var(--text-dim); margin: 12px 0 6px; font-weight: 700; letter-spacing: .4px; text-transform: uppercase; }
.section-head { display:flex; align-items:center; justify-content: space-between; }
.section-actions { display:flex; gap: 6px; }
.list { display:flex; flex-direction: column; gap: 4px; }
.list-item { display:flex; align-items:center; gap: 8px; padding: 6px 8px; border-radius: 8px; color: var(--text); cursor: pointer; }
.list-item:hover { background: var(--chip-hover); }
.list-item.active { background: #1a1f2b; }
.hash { opacity: .6; }
.dm-avatar { width: 18px; height: 18px; border-radius: 4px; background: #2a2f36; display:flex; align-items:center; justify-content:center; font-size: 11px; color: var(--text-dim); }

.content { display:flex; flex-direction: column; min-height: 0; background: var(--content-bg); }
.channel-header { display:flex; align-items:center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--panel-border); background: var(--panel); }
.channel-title { font-weight: 700; }
.switch { display:flex; gap: 8px; }

.message-list { flex: 1; overflow:auto; padding: 16px; }
.message-item { margin-bottom: 14px; display:flex; gap: 10px; }
.avatar { width: 36px; height: 36px; border-radius: 8px; background: #2a2f36; display:flex; align-items:center; justify-content:center; font-weight: 700; color: var(--text-dim); }
.message-body { flex: 1; }
.message-meta { display:flex; gap:8px; align-items: baseline; }
.message-user { font-weight: 600; }
.message-when { font-size: 12px; color: var(--text-dim); }

.composer { display:flex; gap: 8px; padding: 12px 16px; border-top: 1px solid var(--panel-border); background: var(--panel); }
.composer-input { flex: 1; padding: 10px 12px; border-radius: 8px; border:1px solid var(--panel-border); background:#0c0e13; color: var(--text); }

.composer-wrap { display:flex; flex-direction: column; gap: 6px; padding: 8px 16px; border-top: 1px solid var(--panel-border); background: var(--panel); }
.composer-preview { min-height: 0; color: var(--text-dim); font-size: 12px; }
.mention-menu { margin-top: 4px; width: 360px; max-height: 220px; overflow:auto; border:1px solid var(--panel-border); background:#0c0e13; border-radius: 8px; box-shadow: 0 8px 20px rgba(0,0,0,.35); }
.mention-item { display:flex; align-items:center; gap: 8px; padding: 8px 10px; cursor: pointer; }
.mention-item.active, .mention-item:hover { background: #11151d; }
.mention-pill { display:inline-flex; align-items:center; padding: 0 6px; border-radius: 8px; border: 1px solid #76b7ff; color: #9fd0ff; background: rgba(118,183,255,0.08); margin: 0 1px; }

.directory { flex:1; overflow:auto; padding: 16px; }
.grid { display:grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.card { border:1px solid var(--panel-border); background:#0c0e13; border-radius: 10px; padding: 10px; }
.card + .card { margin-top: 0; }
.card-title { font-weight: 700; margin-bottom: 8px; }
.people-card { display:flex; align-items: center; justify-content: space-between; padding: 8px 10px; border:1px solid var(--panel-border); border-radius: 8px; margin-bottom: 8px; }
.people-name { font-weight: 600; }
.people-email { font-size: 12px; color: var(--text-dim); }
.channel-card { padding: 8px 10px; border:1px solid var(--panel-border); border-radius: 8px; margin-bottom: 8px; cursor: pointer; }
.channel-card:hover { background:#10141c; }

/* Profile panel styling */
.profile { flex:1; overflow:auto; padding: 16px; }
.profile-header { display:flex; align-items:center; justify-content: space-between; gap: 16px; border:1px solid var(--panel-border); background:#0c0e13; border-radius: 12px; padding: 14px 16px; margin-bottom: 16px; }
.profile-id { display:flex; align-items:center; gap: 12px; }
.profile-avatar-big { width: 72px; height: 72px; border-radius: 16px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); display:flex; align-items:center; justify-content:center; font-weight: 800; font-size: 28px; color: #fff; }
.profile-name { font-weight: 800; font-size: 18px; }
.profile-sub { color: var(--text-dim); font-size: 12px; }
.profile-actions { display:flex; gap: 8px; }
.profile-grid { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.profile-field { border:1px solid var(--panel-border); background:#0c0e13; border-radius: 10px; padding: 10px; }
.profile-label { color: var(--text-dim); font-size: 12px; text-transform: uppercase; letter-spacing: .4px; margin-bottom: 4px; }
.profile-value { font-weight: 600; }

.avatar-stack { display:flex; align-items:center; }
.avatar-stack .avatar-item { margin-left: -6px; border: 2px solid var(--panel); }
.avatar-stack .avatar-item:first-child { margin-left: 0; }

/* DM picker */
.picker { margin-top: 8px; border:1px solid var(--panel-border); background:#0c0e13; border-radius: 10px; padding: 10px; }
.picker-title { font-weight: 700; margin-bottom: 8px; }
.picker-list { display:flex; flex-direction: column; gap: 6px; max-height: 220px; overflow:auto; }
.picker-item { display:flex; align-items:center; gap: 8px; padding: 6px 8px; border-radius: 8px; }
.picker-item:hover { background: #11151d; }
.picker-footer { display:flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }

